<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no">
    <title>HSF Packaging Group Meeting #13, November 1, 2017</title>
    <link rel="icon" type="image/x-icon" href="/images/hsf_logo_angled.png">

    <!-- bootstrap framework -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/flatly/bootstrap.min.css">

    <link rel="stylesheet" href="/css/hsf.css" type="text/css" />
</head>
<body>

<div class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
          <a href="/" class="navbar-brand"><span class="glyphicon glyphicon-home"></span>&nbsp;&nbsp;HSF</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav navbar-center">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="wg_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Working Groups<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                  <li><a href="/what_are_WGs.html">What are HSF working groups?</a></li>
                  <li class="divider"></li>
                  
                    <li><a href="/workinggroups/dataanalysis.html">Data Analysis</a></li>
                  
                    <li><a href="/workinggroups/detsim.html">Detector Simulation</a></li>
                  
                    <li><a href="/workinggroups/frameworks.html">Frameworks</a></li>
                  
                    <li><a href="/workinggroups/generators.html">Physics Generators</a></li>
                  
                    <li><a href="/workinggroups/juliahep.html">JuliaHEP - Julia in HEP</a></li>
                  
                    <li><a href="/workinggroups/pyhep.html">PyHEP - Python in HEP</a></li>
                  
                    <li><a href="/workinggroups/recotrigger.html">Reconstruction and Software Triggers</a></li>
                  
                    <li><a href="/workinggroups/toolsandpackaging.html">Software Developer Tools and Packaging</a></li>
                  
                    <li><a href="/workinggroups/training.html">HSF Training</a></li>
                  
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="activities_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Activities<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 <li><a href="/what_are_activities.html">What are HSF activity areas?</a></li>
                 <li class="divider"></li>
                 
                   <li><a href="/activities/analysisfacilitiesforum.html">Analysis Facilities Forum</a></li>
                 
                   <li><a href="/activities/conditionsdb.html">Conditions Databases</a></li>
                 
                   <li><a href="/activities/differentiablecomputing.html">Differentiable Computing</a></li>
                 
                   <li><a href="/activities/gsdocs.html">Season of Docs</a></li>
                 
                   <li><a href="/activities/gsoc.html">Google Summer of Code</a></li>
                 
                   <li><a href="/activities/idds.html">intelligent Data Delivery Service</a></li>
                 
                   <li><a href="/activities/licensing.html">Licensing</a></li>
                 
                   <li><a href="/activities/reviews.html">Reviews</a></li>
                 
                   <li><a href="/activities/visualization.html">Visualisation</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="meetings_menu"><span class="glyphicon glyphicon-phone-alt"></span>&nbsp;&nbsp;Meetings<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 
                   <li><a href="/meetings/compute-accelerator-forum.html">Compute Accelerator Forum</a></li>
                 
                   <li><a href="/meetings/coordination.html">Coordination Meetings</a></li>
                 
                   <li><a href="/meetings/roundtable.html">Software and Computing Roundtable</a></li>
                 
                   <li><a href="/meetings/software-forum.html">Software Forum</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="communication_menu"><span class="glyphicon glyphicon-bullhorn"></span>&nbsp;&nbsp;Communication<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="communication_menu">
                  <li><a href="/future-events.html">Community Calendar</a></li>
                  <li><a href="https://indico.cern.ch/category/5816/" target="_hsf_indico">Meetings: Indico</a></li>
                  <li><a href="/Schools/events.html">Training Schools</a></li>
                  <li class="divider"></li>
                  <li><a href="/forums.html">Mailing Lists and Forums</a></li>
                  <li><a href="/organization/minutes.html">Meeting Notes</a></li>
                  <li><a href="/technical_notes.html">Technical Notes</a></li>
                  <li><a href="/organization/documents.html">Documents</a></li>
                  <li><a href="/material_for_presentations.html">Material for presentations</a></li>
                  <li class="divider"></li>
                  <li><a href="/newsletter.html">Newsletters</a></li>
                  <li><a href="/events.html">Events &amp; Workshops</a></li>
                  <li><a href="https://www.youtube.com/c/HEPSoftwareFoundation" target="_hsf_youtube">HSF on YouTube</a></li>
                  <li class="divider"></li>

                  <li><a href="/inventory/inventory.html">HSF Project Inventory</a></li>
                </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/projects.html" id="projects_menu"><span class="glyphicon glyphicon-road"></span>&nbsp;&nbsp;Projects &amp; Support<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="projects_menu">
                  <li><a href="/project_guidelines.html">How to join as a project</a></li>
                  <li><a href="/projects.html">Member Projects</a></li>
                  <li class="divider"></li>
                  <li><a href="/services.html">Development Services</a></li>
                </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="about_menu"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;&nbsp;About<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="about_menu">
                <li><a href="/get_involved.html">Get involved!</a><li>
                <li><a href="/organization/team.html">The Coordination Team</a></li>
                <li><a href="/organization/planning/plan-of-work-2023.html">HSF Planning</a></li>
                <li class="divider"></li>
                <li><a href="/organization/goals.html">Goals of the HSF</a></li>
                <li><a href="/organization/cwp.html">Community White Paper</a></li>
                <li><a href="/organization/hsf-letters.html">Letters from the HSF</a></li>
                <li><a href="/organization/presentations.html">HSF Presentations</a></li>
                <li><a href="/organization/youtube.html">HSF YouTube Channel</a></li>
                <li class="divider"></li>
                <li><a href="/howto-website.html">Website Howto</a></li>
              </ul>
            </li>
          </ul>
        </div>
    </div>
</div>


<div class="container">

<div class="PageNavigation">

  <!-- Note that page sorting is reverse time ordered, so "next" refers to the previous
       meeting in time and "previous" to the next one -->
  
   <p class="alignleft"><a href="/organization/2017/10/26/startup.html">&nbsp;&#8592; HSF Weekly Meeting #114, October 26, 2017</a></p>
  

  
    <p class="alignright"><a href="/organization/2017/11/02/startup.html">HSF Weekly Meeting #115, November 2, 2017 &#8594;&nbsp;</a></p>
  

</div>

<div style="clear: both;"></div>


<hr>

  <h1 id="hsf-packaging-group-meeting-13-november-1-2017">HSF Packaging Group Meeting #13, November 1, 2017</h1>

<h4 id="present-graeme-stewart-patrick-gartung-benedikt-hegner-javier-cervantes-villaneuva-raphal-pacholek-guilherme-amadio-ben-morgan-ben-couturier-liz-sexton-kennedy-lynn-garren-jim-amundson"><em>Present</em>: Graeme Stewart, Patrick Gartung, Benedikt Hegner, Javier Cervantes Villaneuva, Raphal Pacholek, Guilherme Amadio, Ben Morgan, Ben Couturier, Liz Sexton-Kennedy, Lynn Garren, Jim Amundson</h4>

<h4 id="indico-agenda-and-presentations"><a href="https://indico.cern.ch/event/674780/" target="_hsf_packaging_13">Indico Agenda and Presentations</a></h4>

<h2 id="introduction">Introduction</h2>

<ul>
  <li>Ben Morgan joins Graeme as second co-convener of the group.</li>
  <li>Proposal for setting up a small test-stack for the packaging solutions being investigated:
    <ul>
      <li>Ben was happy to volunteer the SuperNEMO stack - it’s quite small;</li>
      <li>FCC was able to compile their whole stack with Spack (Gaudi + FCCSW), certainly good to get Gaudi;</li>
      <li>Lynn: G4, ROOT and CLHEP would be ideal;</li>
      <li>Python is also needed.</li>
    </ul>
  </li>
  <li><strong>ACTION: Will create a doc to collect the concrete definition of the test stack</strong></li>
</ul>

<h2 id="spack">Spack</h2>

<ul>
  <li>Tried a few more use-cases using more libraries from the system directly. Discovered a bug in binary packaging for such cases, there are fixes on the way.</li>
  <li>At FNAL using dual-step bootstrap as to avoid recompilation of cmake, etc. for every compiler.</li>
  <li>Singularity and Spack are working together, building a stack within the singularity shell
    <ul>
      <li>Allows distribution of minimal containers</li>
    </ul>
  </li>
  <li>Q by Ben M about Singularity: better from security perspective and good experience in Warwick. Are sys admins happy with that solution?
    <ul>
      <li>A by Liz: singularity is recommended by the WLCG working group. It is the solution on NSF supercomputers, DOE still to be convinced.</li>
    </ul>
  </li>
</ul>

<h2 id="containers-in-supernemo">Containers in SuperNEMO</h2>

<ul>
  <li>Introduction to SuperNEMO use case</li>
  <li>Package management with homebrew. Most packages maintained externally.
    <ul>
      <li>No bottles used yet</li>
    </ul>
  </li>
  <li>Binary distribution on top of homebrew needed.
    <ul>
      <li>Using docker containers already for TravisCI, etc. based on CentOS and Ubuntu.</li>
      <li>Container building done manually and uploaded to DockerHub. CentOS 6/7 and Ubuntu 14LTS/16LTS.</li>
      <li>Usage of containers complicated by size of images. Every CI round fetches image into cache again.</li>
    </ul>
  </li>
  <li>For deployment homebrew works for most users; providing a Ubuntu16LTS container of latest snapshot as well.</li>
  <li>
    <p>Containers not used in production as no docker’ed resources available</p>
  </li>
  <li>Discussion:
    <ul>
      <li>Best practices for layering are still not clear.</li>
      <li>Noted packaging + docker don’t exclude each other; we agree that binary packaging is required for any solution.
        <ul>
          <li>For LHCb it is clear that uninstall is important as well (so need a fully featured solution for managing deployment lifecycle).</li>
        </ul>
      </li>
      <li>CVMFS:
        <ul>
          <li>Graphdriver plugin for docker is interesting as you can download only the pieces of the container that are needed at runtime (see <a href="https://indico.cern.ch/event/673223/contributions/2754513/attachments/1540835/2416224/slides.pdf">this presentation</a> in the SFT group).</li>
          <li>For installing onto CVMFS with Spack you need to run Spack. Difficulties if the install location is not the same as the run location (although CVMFS Stratum0 can be setup that way).</li>
          <li>Small experiments sometimes do not have enough support for the server side of CVMFS.</li>
          <li>Long term vision may be providing a common stack in a supported CVMFS setup.</li>
        </ul>
      </li>
      <li>Singularity is a solution for security problems in docker deployment (also mentioned above).</li>
      <li>Guilherme pointed to <a href="https://coreos.com/rkt/">rkt</a> as another container solution.</li>
    </ul>
  </li>
</ul>

<h2 id="aob">AOB</h2>
<ul>
  <li><a href="https://indico.cern.ch/event/678307/">Next meeting</a> in 2 weeks, 15 November.</li>
</ul>


<hr>

<div class="PageNavigation">

  <!-- Note that page sorting is reverse time ordered, so "next" refers to the previous
       meeting in time and "previous" to the next one -->
  
   <p class="alignleft"><a href="/organization/2017/10/26/startup.html">&nbsp;&#8592; HSF Weekly Meeting #114, October 26, 2017</a></p>
  

  
    <p class="alignright"><a href="/organization/2017/11/02/startup.html">HSF Weekly Meeting #115, November 2, 2017 &#8594;&nbsp;</a></p>
  

</div>

<div style="clear: both;"></div>


<br><br>
<div class="footer fixed-bottom">
Thanks to <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://jekyllrb.com/">Jekyll</a> and <a href="http://getbootstrap.com/">Bootstrap</a>
</div>

</div> <!-- container -->


<!-- Google Analytics -->

<!-- Google Analytics end -->

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</body>
</html>
