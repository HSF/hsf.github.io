<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no">
    <title>HSF Packaging Meeting #34, 29 May, 2019</title>
    <link rel="icon" type="image/x-icon" href="/images/hsf_logo_angled.png">

    <!-- bootstrap framework -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/flatly/bootstrap.min.css">

    <link rel="stylesheet" href="/css/hsf.css" type="text/css" />
</head>
<body>

<div class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
          <a href="/" class="navbar-brand"><span class="glyphicon glyphicon-home"></span>&nbsp;&nbsp;HSF</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav navbar-center">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="wg_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Working Groups<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                  <li><a href="/what_are_WGs.html">What are HSF working groups?</a></li>
                  <li class="divider"></li>
                  
                    <li><a href="/workinggroups/dataanalysis.html">Data Analysis</a></li>
                  
                    <li><a href="/workinggroups/detsim.html">Detector Simulation</a></li>
                  
                    <li><a href="/workinggroups/frameworks.html">Frameworks</a></li>
                  
                    <li><a href="/workinggroups/generators.html">Physics Generators</a></li>
                  
                    <li><a href="/workinggroups/juliahep.html">JuliaHEP - Julia in HEP</a></li>
                  
                    <li><a href="/workinggroups/pyhep.html">PyHEP - Python in HEP</a></li>
                  
                    <li><a href="/workinggroups/recotrigger.html">Reconstruction and Software Triggers</a></li>
                  
                    <li><a href="/workinggroups/toolsandpackaging.html">Software Developer Tools and Packaging</a></li>
                  
                    <li><a href="/workinggroups/training.html">HSF Training</a></li>
                  
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="activities_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Activities<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 <li><a href="/what_are_activities.html">What are HSF activity areas?</a></li>
                 <li class="divider"></li>
                 
                   <li><a href="/activities/analysisfacilitiesforum.html">Analysis Facilities Forum</a></li>
                 
                   <li><a href="/activities/conditionsdb.html">Conditions Databases</a></li>
                 
                   <li><a href="/activities/differentiablecomputing.html">Differentiable Computing</a></li>
                 
                   <li><a href="/activities/gsdocs.html">Season of Docs</a></li>
                 
                   <li><a href="/activities/gsoc.html">Google Summer of Code</a></li>
                 
                   <li><a href="/activities/idds.html">intelligent Data Delivery Service</a></li>
                 
                   <li><a href="/activities/licensing.html">Licensing</a></li>
                 
                   <li><a href="/activities/reviews.html">Reviews</a></li>
                 
                   <li><a href="/activities/visualization.html">Visualisation</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="meetings_menu"><span class="glyphicon glyphicon-phone-alt"></span>&nbsp;&nbsp;Meetings<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 
                   <li><a href="/meetings/compute-accelerator-forum.html">Compute Accelerator Forum</a></li>
                 
                   <li><a href="/meetings/coordination.html">Coordination Meetings</a></li>
                 
                   <li><a href="/meetings/roundtable.html">Software and Computing Roundtable</a></li>
                 
                   <li><a href="/meetings/software-forum.html">Software Forum</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="communication_menu"><span class="glyphicon glyphicon-bullhorn"></span>&nbsp;&nbsp;Communication<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="communication_menu">
                  <li><a href="/future-events.html">Community Calendar</a></li>
                  <li><a href="https://indico.cern.ch/category/5816/" target="_hsf_indico">Meetings: Indico</a></li>
                  <li><a href="/Schools/events.html">Training Schools</a></li>
                  <li class="divider"></li>
                  <li><a href="/forums.html">Mailing Lists and Forums</a></li>
                  <li><a href="/organization/minutes.html">Meeting Notes</a></li>
                  <li><a href="/technical_notes.html">Technical Notes</a></li>
                  <li><a href="/organization/documents.html">Documents</a></li>
                  <li><a href="/material_for_presentations.html">Material for presentations</a></li>
                  <li class="divider"></li>
                  <li><a href="/newsletter.html">Newsletters</a></li>
                  <li><a href="/events.html">Events &amp; Workshops</a></li>
                  <li><a href="https://www.youtube.com/c/HEPSoftwareFoundation" target="_hsf_youtube">HSF on YouTube</a></li>
                  <li class="divider"></li>

                  <li><a href="/inventory/inventory.html">HSF Project Inventory</a></li>
                </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/projects.html" id="projects_menu"><span class="glyphicon glyphicon-road"></span>&nbsp;&nbsp;Projects &amp; Support<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="projects_menu">
                  <li><a href="/project_guidelines.html">How to join as a project</a></li>
                  <li><a href="/projects.html">Member Projects</a></li>
                  <li class="divider"></li>
                  <li><a href="/services.html">Development Services</a></li>
                </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="about_menu"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;&nbsp;About<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="about_menu">
                <li><a href="/get_involved.html">Get involved!</a><li>
                <li><a href="/organization/team.html">The Coordination Team</a></li>
                <li><a href="/organization/planning/plan-of-work-2023.html">HSF Planning</a></li>
                <li class="divider"></li>
                <li><a href="/organization/goals.html">Goals of the HSF</a></li>
                <li><a href="/organization/cwp.html">Community White Paper</a></li>
                <li><a href="/organization/hsf-letters.html">Letters from the HSF</a></li>
                <li><a href="/organization/presentations.html">HSF Presentations</a></li>
                <li><a href="/organization/youtube.html">HSF YouTube Channel</a></li>
                <li class="divider"></li>
                <li><a href="/howto-website.html">Website Howto</a></li>
              </ul>
            </li>
          </ul>
        </div>
    </div>
</div>


<div class="container">

<div class="PageNavigation">

  <!-- Note that page sorting is reverse time ordered, so "next" refers to the previous
       meeting in time and "previous" to the next one -->
  
   <p class="alignleft"><a href="/announcements/2019/05/27/sim.html">&nbsp;&#8592; Simulation Working Group, Detector Geometry Description Tools 12 June 2019</a></p>
  

  
    <p class="alignright"><a href="/organization/2019/06/06/coordination.html">HSF Weekly Meeting #167, 6 June, 2019 &#8594;&nbsp;</a></p>
  

</div>

<div style="clear: both;"></div>


<hr>

  <h1 id="hsf-packaging-meeting-34-29-may-2019">HSF Packaging Meeting #34, 29 May, 2019</h1>

<h2 id="agenda">Agenda</h2>
<p><a href="https://indico.cern.ch/event/819329/"><span class="underline">https://indico.cern.ch/event/819329/</span></a></p>

<p>Participants: Ben Morgan, Patrick Gartung, Graeme Stewart, Javier Cervantes, Chris Burr,
Pere Mato, Dmitri Konstantinov, Geri Ganis, Guilherme Amadio, Marco Clemencic, Chris Green, Elizabeth Sexton-Kennedy, Ivan Razumov</p>

<h2 id="introduction-graeme">Introduction (Graeme)</h2>
<ul>
  <li>Ongoing Projects: FCC/LCG
    <ul>
      <li>LCG stack with Spack (+ CERN summer student from June/July)
        <ul>
          <li>Javier: some issues with ROOT, but everything below o.k.</li>
        </ul>
      </li>
      <li>CHEP abstract submitted (+ wider WG topics), additional collaboration welcome</li>
    </ul>
  </li>
  <li>Any other CHEP abstracts submitted?
    <ul>
      <li>Chris Burr: one on Conda/ROOT + CVMFS</li>
      <li>Guilherme: Maybe one from Gentoo/Portage</li>
      <li>Patrick/Chris: One on SpackDev</li>
    </ul>
  </li>
  <li>Next meeting options: 19th/26th June/3 July
    <ul>
      <li>19th maybe too soon?</li>
      <li>26th awkward due to many people travelling</li>
      <li>3rd July looking best</li>
    </ul>
  </li>
</ul>

<h2 id="spackspackdev-chris-green">Spack/SpackDev (Chris Green)</h2>
<ul>
  <li>Improvements to Spack core
    <ul>
      <li>“VISUAL” env var for recipe editing</li>
      <li>Better saving of environment plus PATH-like var manipulation</li>
      <li>Better CMake builds</li>
    </ul>
  </li>
  <li>Core recipe improvements
    <ul>
      <li>Inc: mysql, mariadb, postgresql, intel-tbb, cppunit, gl2ps, range-v3, nix, boost, sqlite, numpy</li>
      <li>Reconciled FNAL root recipe with upstream</li>
      <li>Resolved “-isystem” issue with ROOT/Spack</li>
    </ul>
  </li>
  <li>Other news
    <ul>
      <li>Work Items doc updated to version 0.4</li>
      <li>Bi-weekly production meetings with Peter Scheibel (Spack principal), inc. discussion on items in above doc, with WIP/AIP on requirements</li>
      <li>AIP to merge SpackDev into core, telcon with Elizabeth Fischer (Spack contributor) who’s working on similar topic</li>
    </ul>
  </li>
  <li>SpackDev progress
    <ul>
      <li>Accuracy/Speed improvements for consistent package checkout</li>
      <li>Package names can have hyphens</li>
      <li>Accommodate changes to upstream Spack</li>
      <li>Print “spec tree” for packages specified for development</li>
      <li>Input DAG (everything need for a release) can have several top-level packages with co-concretization</li>
      <li>Package checkout improvements, e.g. require that development packages come from VCS systems.</li>
      <li>Global build can handle tests in parallel</li>
    </ul>
  </li>
  <li>MVP1a
    <ul>
      <li>Integration testing round that identified previously mentioned updates</li>
      <li>LArSoft now building with Art 3.02.04 (but will go to 3.02.05 for MVP)</li>
      <li>Remaining issue with “wirecell” package, need to support Git submodules
        <ul>
          <li>Spack supports submodules, but wirecell needs a additional manual step.</li>
          <li>Guilherme: Could create tarballs? Chris: Would imply FNAL becomes maintainer of those tarballs. Fix locally in Spack to get MVP progressing. Brett Viren
(wirecell maintainer) has already produced several composite source tarballs, the URIs for which have been incorporated into the recipe. A successful build of 0.10.9 has been achieved.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Chris: some issues still require updates to the core concretization system (by Todd Gamblin), aim is end of September, but may slip.</li>
</ul>

<h2 id="distributing-cms-fwlite-with-conda-patrick">Distributing CMS FWLite with Conda (Patrick)</h2>
<ul>
  <li>Conda recap:
    <ul>
      <li>Latest uses gcc 7.3/clang 4.0.1 (with SDK from OSX 10.9)</li>
      <li>Everything linked under one prefix</li>
    </ul>
  </li>
  <li>FWLite with scram in Conda?
    <ul>
      <li>Conda prefix + ROOT installed</li>
      <li>Linux: Trivial</li>
      <li>OSX: issues with Scram going into an infinite loop (with/without SIP)</li>
    </ul>
  </li>
  <li>Went to CMake using scram2cmake tool
    <ul>
      <li>See <a href="https://github.com/gartung/fwlite">https://github.com/gartung/fwlite</a></li>
      <li>Some tweaking needed for CMake FindXXX</li>
      <li>Some tweaking need for fwlite sources</li>
    </ul>
  </li>
  <li>Conda-forge: “feedstocks”: repos for each package + builds for platforms
    <ul>
      <li>Updates for conda-forge and additions needed for fwlite dependencies</li>
    </ul>
  </li>
  <li>Guide for installing miniconda + up to fwlite</li>
  <li>Summary:
    <ul>
      <li>Can install FWlite with Conda!</li>
      <li>Generated conda environment not intended to be a development environment (e.g. conda compiler wrappers not included in install prefix)</li>
      <li>But should work for analysis</li>
    </ul>
  </li>
  <li>Questions:
    <ul>
      <li>Pere: What are the caveats on ROOT macros? Patrick/Chris B: Issues with the macOS SDK on 10.14</li>
      <li>Graeme: Why the old SDK? Chris B: for compatibility with older systems</li>
      <li>Ben: Why the old Clang? Chris B: Seems to work well enough at the moment.</li>
      <li>Graeme: Is there an issue with not having a development environment? Patrick: Seems to be o.k. for Python tools, and when building an application on top of the environment.</li>
      <li>Ben: Can it work to develop single packages (i.e. env contains the compilers etc). Chris B: Yes, a bit flaky on macOS, but getting better.</li>
    </ul>
  </li>
</ul>

<h2 id="aob">AOB</h2>
<ul>
  <li>With summer holiday/meetings dates starting to encroach on dates for next WG meeting,
will see how updates progress.
    <ul>
      <li>Can have responsive meetings as/if required.</li>
    </ul>
  </li>
</ul>



<hr>

<div class="PageNavigation">

  <!-- Note that page sorting is reverse time ordered, so "next" refers to the previous
       meeting in time and "previous" to the next one -->
  
   <p class="alignleft"><a href="/announcements/2019/05/27/sim.html">&nbsp;&#8592; Simulation Working Group, Detector Geometry Description Tools 12 June 2019</a></p>
  

  
    <p class="alignright"><a href="/organization/2019/06/06/coordination.html">HSF Weekly Meeting #167, 6 June, 2019 &#8594;&nbsp;</a></p>
  

</div>

<div style="clear: both;"></div>


<br><br>
<div class="footer fixed-bottom">
Thanks to <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://jekyllrb.com/">Jekyll</a> and <a href="http://getbootstrap.com/">Bootstrap</a>
</div>

</div> <!-- container -->


<!-- Google Analytics -->

<!-- Google Analytics end -->

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</body>
</html>
