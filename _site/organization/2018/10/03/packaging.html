<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no">
    <title>HSF Packaging Group Meeting #28, October 3, 2018</title>
    <link rel="icon" type="image/x-icon" href="/images/hsf_logo_angled.png">

    <!-- bootstrap framework -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/flatly/bootstrap.min.css">

    <link rel="stylesheet" href="/css/hsf.css" type="text/css" />
</head>
<body>

<div class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
          <a href="/" class="navbar-brand"><span class="glyphicon glyphicon-home"></span>&nbsp;&nbsp;HSF</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav navbar-center">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="wg_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Working Groups<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                  <li><a href="/what_are_WGs.html">What are HSF working groups?</a></li>
                  <li class="divider"></li>
                  
                    <li><a href="/workinggroups/dataanalysis.html">Data Analysis</a></li>
                  
                    <li><a href="/workinggroups/detsim.html">Detector Simulation</a></li>
                  
                    <li><a href="/workinggroups/frameworks.html">Frameworks</a></li>
                  
                    <li><a href="/workinggroups/generators.html">Physics Generators</a></li>
                  
                    <li><a href="/workinggroups/juliahep.html">JuliaHEP - Julia in HEP</a></li>
                  
                    <li><a href="/workinggroups/pyhep.html">PyHEP - Python in HEP</a></li>
                  
                    <li><a href="/workinggroups/recotrigger.html">Reconstruction and Software Triggers</a></li>
                  
                    <li><a href="/workinggroups/toolsandpackaging.html">Software Developer Tools and Packaging</a></li>
                  
                    <li><a href="/workinggroups/training.html">HSF Training</a></li>
                  
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="activities_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Activities<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 <li><a href="/what_are_activities.html">What are HSF activity areas?</a></li>
                 <li class="divider"></li>
                 
                   <li><a href="/activities/analysisfacilitiesforum.html">Analysis Facilities Forum</a></li>
                 
                   <li><a href="/activities/conditionsdb.html">Conditions Databases</a></li>
                 
                   <li><a href="/activities/differentiablecomputing.html">Differentiable Computing</a></li>
                 
                   <li><a href="/activities/gsdocs.html">Season of Docs</a></li>
                 
                   <li><a href="/activities/gsoc.html">Google Summer of Code</a></li>
                 
                   <li><a href="/activities/idds.html">intelligent Data Delivery Service</a></li>
                 
                   <li><a href="/activities/licensing.html">Licensing</a></li>
                 
                   <li><a href="/activities/reviews.html">Reviews</a></li>
                 
                   <li><a href="/activities/visualization.html">Visualisation</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="meetings_menu"><span class="glyphicon glyphicon-phone-alt"></span>&nbsp;&nbsp;Meetings<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 
                   <li><a href="/meetings/compute-accelerator-forum.html">Compute Accelerator Forum</a></li>
                 
                   <li><a href="/meetings/coordination.html">Coordination Meetings</a></li>
                 
                   <li><a href="/meetings/roundtable.html">Software and Computing Roundtable</a></li>
                 
                   <li><a href="/meetings/software-forum.html">Software Forum</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="communication_menu"><span class="glyphicon glyphicon-bullhorn"></span>&nbsp;&nbsp;Communication<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="communication_menu">
                  <li><a href="/future-events.html">Community Calendar</a></li>
                  <li><a href="https://indico.cern.ch/category/5816/" target="_hsf_indico">Meetings: Indico</a></li>
                  <li><a href="/Schools/events.html">Training Schools</a></li>
                  <li class="divider"></li>
                  <li><a href="/forums.html">Mailing Lists and Forums</a></li>
                  <li><a href="/organization/minutes.html">Meeting Notes</a></li>
                  <li><a href="/technical_notes.html">Technical Notes</a></li>
                  <li><a href="/organization/documents.html">Documents</a></li>
                  <li><a href="/material_for_presentations.html">Material for presentations</a></li>
                  <li class="divider"></li>
                  <li><a href="/newsletter.html">Newsletters</a></li>
                  <li><a href="/events.html">Events &amp; Workshops</a></li>
                  <li><a href="https://www.youtube.com/c/HEPSoftwareFoundation" target="_hsf_youtube">HSF on YouTube</a></li>
                  <li class="divider"></li>

                  <li><a href="/inventory/inventory.html">HSF Project Inventory</a></li>
                </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/projects.html" id="projects_menu"><span class="glyphicon glyphicon-road"></span>&nbsp;&nbsp;Projects &amp; Support<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="projects_menu">
                  <li><a href="/project_guidelines.html">How to join as a project</a></li>
                  <li><a href="/projects.html">Member Projects</a></li>
                  <li class="divider"></li>
                  <li><a href="/services.html">Development Services</a></li>
                </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="about_menu"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;&nbsp;About<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="about_menu">
                <li><a href="/get_involved.html">Get involved!</a><li>
                <li><a href="/organization/team.html">The Coordination Team</a></li>
                <li><a href="/organization/planning/plan-of-work-2023.html">HSF Planning</a></li>
                <li class="divider"></li>
                <li><a href="/organization/goals.html">Goals of the HSF</a></li>
                <li><a href="/organization/cwp.html">Community White Paper</a></li>
                <li><a href="/organization/hsf-letters.html">Letters from the HSF</a></li>
                <li><a href="/organization/presentations.html">HSF Presentations</a></li>
                <li><a href="/organization/youtube.html">HSF YouTube Channel</a></li>
                <li class="divider"></li>
                <li><a href="/howto-website.html">Website Howto</a></li>
              </ul>
            </li>
          </ul>
        </div>
    </div>
</div>


<div class="container">

<div class="PageNavigation">

  <!-- Note that page sorting is reverse time ordered, so "next" refers to the previous
       meeting in time and "previous" to the next one -->
  
   <p class="alignleft"><a href="/announcements/2018/09/26/software-dev-heptrkx.html">&nbsp;&#8592; Software Forum - HEP.TrkX, 26 September 2018</a></p>
  

  
    <p class="alignright"><a href="/organization/2018/10/04/coordination.html">HSF Weekly Meeting #146, 4 October, 2018 &#8594;&nbsp;</a></p>
  

</div>

<div style="clear: both;"></div>


<hr>

  <h1 id="hsf-packaging-group-meeting-28-october-3-2018">HSF Packaging Group Meeting #28, October 3, 2018</h1>

<h1 id="agenda">Agenda</h1>
<p><a href="https://indico.cern.ch/event/758817/"><em>https://indico.cern.ch/event/758817/</em></a></p>

<p>Participants: Graeme Stewart, Pere Mato, Gerri Ganis, Liz Sexton-Kennedy,
Patrick Gartung, Guilherme Amadio, Lynn Garren, Chris Green, Jim
Amundson, Benedikt Hegner</p>

<h1 id="introduction">Introduction</h1>
<ul>
  <li>We can have another meeting in 2 weeks time, if people have
contributions to make.
    <ul>
      <li>Guilherme could report on Portage stack.</li>
      <li>Pere can report on LCGCMake updates.</li>
    </ul>
  </li>
</ul>

<h1 id="fnal-spack-update">FNAL Spack Update</h1>
<ul>
  <li>MVP = Minimum Viable Product.
    <ul>
      <li>This is for experiments to try and give feedback.</li>
      <li>SLC7, gcc7.3 with C++17, “prof” optimisation level.</li>
      <li>Top package is the art suite, should be good for interesting
development.</li>
      <li>N.B. LArSoft can’t yet be used as the external requirements are
large.</li>
    </ul>
  </li>
  <li>Feedback on instructions and documentation as well as MVP itself
welcome.</li>
  <li>When you install an MVP it’s self-contained - it downloads things to
your local system and builds them.
    <ul>
      <li>There are a few pre-requisites (gzip, tar) needed from the
system and the bootstrapper checks that.</li>
      <li>As gcc gets built from source it all takes an hour on a powerful
machine.</li>
    </ul>
  </li>
  <li>In <code class="language-plaintext highlighter-rouge">srcs/</code> there is a top level CMakeLists.txt that orchestrates the build
of all of the local packages here.
    <ul>
      <li>The CMakeLists.txt is constructed from the Spack recipe for each
of the packages.</li>
      <li>Captures any dependencies between these local packages.</li>
      <li>Spackdev requires spack concretisation, so it can get slow for
deep/wide dependencies.</li>
    </ul>
  </li>
  <li>Dependencies need to be fully built and installed before any
dependent package can proceed with its build.</li>
  <li>For Python packages?
    <ul>
      <li>Only CMake supported (at the moment), so not possible to do
this, but this is a future feature.</li>
      <li>Extraction of the build recipe from Spack to push into
CMakeLists.txt makes things more complex than normal - not
using all the ‘native’ features of <code class="language-plaintext highlighter-rouge">ExternalProject_Add()</code>.</li>
    </ul>
  </li>
  <li>Pere: Bootstrap of CMakeLists from Spack seems the wrong way around.
Developer should start with CMake and then develop a Spack recipe
to share the package.
    <ul>
      <li>Key feature is the ability to work on multiple developments and
have all dependencies resolved, so that requires Spack-level
information to bootstrap.</li>
      <li>Allows developments and dependencies to be handled more easily
than in ‘native’ Spack.
        <ul>
          <li>This is a feature of the current FNAL development
environment and experiments wanted this to be reproduced.</li>
        </ul>
      </li>
      <li>It’s hard to make Spack itself build from a checked out and
modified code base instead of from a git reference.
        <ul>
          <li>Could that be an extension for Spack?</li>
          <li>Patrick - not a feature in Spack right now.</li>
          <li>Jim - Todd G is supportive of managing this external to
Spack.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>SpackDev as a Spack extension would allow this all to look more
natural (<code class="language-plaintext highlighter-rouge">spack dev ...</code>) and improve performance (only one
concretisation process).</li>
  <li>Guilherme: Can Spack update itself?
    <ul>
      <li>This essentially a <code class="language-plaintext highlighter-rouge">git pull</code>; but then any updated recipe
changes hashes and would bring a lot of rebuilds along.</li>
      <li>Would maybe be useful to separate the recipes and the core Spack
code (Jim was supportive of this idea).
        <ul>
          <li>Although you can override any recipes with your own (and
keep them the same).</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>SpackChains and BuildCache demonstrate a good and healthy
interaction between HEP and Spack developers.</li>
  <li>Many other developments needed to move to a full product and working
ecosystem.</li>
  <li>Patrick: a Spack environment command is being development and would
be able to record and lock versions, for making releases (writes a
packages.yaml).
    <ul>
      <li>A packages.yaml file declares paths and versions only, so system
updates can happen (but update the version if something is
incompatible!). Full implications should be explored though,
we don’t really have experience of this.</li>
    </ul>
  </li>
</ul>

<h1 id="aob">AOB</h1>
<ul>
  <li>With Pere and Guilherme’s updates we plan to have the next
meeting in 2 weeks time.</li>
</ul>


<hr>

<div class="PageNavigation">

  <!-- Note that page sorting is reverse time ordered, so "next" refers to the previous
       meeting in time and "previous" to the next one -->
  
   <p class="alignleft"><a href="/announcements/2018/09/26/software-dev-heptrkx.html">&nbsp;&#8592; Software Forum - HEP.TrkX, 26 September 2018</a></p>
  

  
    <p class="alignright"><a href="/organization/2018/10/04/coordination.html">HSF Weekly Meeting #146, 4 October, 2018 &#8594;&nbsp;</a></p>
  

</div>

<div style="clear: both;"></div>


<br><br>
<div class="footer fixed-bottom">
Thanks to <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://jekyllrb.com/">Jekyll</a> and <a href="http://getbootstrap.com/">Bootstrap</a>
</div>

</div> <!-- container -->


<!-- Google Analytics -->

<!-- Google Analytics end -->

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</body>
</html>
