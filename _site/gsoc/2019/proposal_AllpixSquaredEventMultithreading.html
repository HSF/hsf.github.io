<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no">
    <title>Implement Event based Seeding and Multi-Threading</title>
    <link rel="icon" type="image/x-icon" href="/images/hsf_logo_angled.png">

    <!-- bootstrap framework -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/flatly/bootstrap.min.css">

    <link rel="stylesheet" href="/css/hsf.css" type="text/css" />
</head>
<body>

<div class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
          <a href="/" class="navbar-brand"><span class="glyphicon glyphicon-home"></span>&nbsp;&nbsp;HSF</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav navbar-center">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="wg_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Working Groups<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                  <li><a href="/what_are_WGs.html">What are HSF working groups?</a></li>
                  <li class="divider"></li>
                  
                    <li><a href="/workinggroups/dataanalysis.html">Data Analysis</a></li>
                  
                    <li><a href="/workinggroups/detsim.html">Detector Simulation</a></li>
                  
                    <li><a href="/workinggroups/frameworks.html">Frameworks</a></li>
                  
                    <li><a href="/workinggroups/generators.html">Physics Generators</a></li>
                  
                    <li><a href="/workinggroups/juliahep.html">JuliaHEP - Julia in HEP</a></li>
                  
                    <li><a href="/workinggroups/pyhep.html">PyHEP - Python in HEP</a></li>
                  
                    <li><a href="/workinggroups/recotrigger.html">Reconstruction and Software Triggers</a></li>
                  
                    <li><a href="/workinggroups/toolsandpackaging.html">Software Developer Tools and Packaging</a></li>
                  
                    <li><a href="/workinggroups/training.html">HSF Training</a></li>
                  
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="activities_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Activities<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 <li><a href="/what_are_activities.html">What are HSF activity areas?</a></li>
                 <li class="divider"></li>
                 
                   <li><a href="/activities/analysisfacilitiesforum.html">Analysis Facilities Forum</a></li>
                 
                   <li><a href="/activities/conditionsdb.html">Conditions Databases</a></li>
                 
                   <li><a href="/activities/differentiablecomputing.html">Differentiable Computing</a></li>
                 
                   <li><a href="/activities/gsdocs.html">Season of Docs</a></li>
                 
                   <li><a href="/activities/gsoc.html">Google Summer of Code</a></li>
                 
                   <li><a href="/activities/idds.html">intelligent Data Delivery Service</a></li>
                 
                   <li><a href="/activities/licensing.html">Licensing</a></li>
                 
                   <li><a href="/activities/reviews.html">Reviews</a></li>
                 
                   <li><a href="/activities/visualization.html">Visualisation</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="meetings_menu"><span class="glyphicon glyphicon-phone-alt"></span>&nbsp;&nbsp;Meetings<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 
                   <li><a href="/meetings/compute-accelerator-forum.html">Compute Accelerator Forum</a></li>
                 
                   <li><a href="/meetings/coordination.html">Coordination Meetings</a></li>
                 
                   <li><a href="/meetings/roundtable.html">Software and Computing Roundtable</a></li>
                 
                   <li><a href="/meetings/software-forum.html">Software Forum</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="communication_menu"><span class="glyphicon glyphicon-bullhorn"></span>&nbsp;&nbsp;Communication<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="communication_menu">
                  <li><a href="/future-events.html">Community Calendar</a></li>
                  <li><a href="https://indico.cern.ch/category/5816/" target="_hsf_indico">Meetings: Indico</a></li>
                  <li><a href="/Schools/events.html">Training Schools</a></li>
                  <li class="divider"></li>
                  <li><a href="/forums.html">Mailing Lists and Forums</a></li>
                  <li><a href="/organization/minutes.html">Meeting Notes</a></li>
                  <li><a href="/technical_notes.html">Technical Notes</a></li>
                  <li><a href="/organization/documents.html">Documents</a></li>
                  <li><a href="/material_for_presentations.html">Material for presentations</a></li>
                  <li class="divider"></li>
                  <li><a href="/newsletter.html">Newsletters</a></li>
                  <li><a href="/events.html">Events &amp; Workshops</a></li>
                  <li><a href="https://www.youtube.com/c/HEPSoftwareFoundation" target="_hsf_youtube">HSF on YouTube</a></li>
                  <li class="divider"></li>

                  <li><a href="/inventory/inventory.html">HSF Project Inventory</a></li>
                </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/projects.html" id="projects_menu"><span class="glyphicon glyphicon-road"></span>&nbsp;&nbsp;Projects &amp; Support<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="projects_menu">
                  <li><a href="/project_guidelines.html">How to join as a project</a></li>
                  <li><a href="/projects.html">Member Projects</a></li>
                  <li class="divider"></li>
                  <li><a href="/services.html">Development Services</a></li>
                </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="about_menu"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;&nbsp;About<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="about_menu">
                <li><a href="/get_involved.html">Get involved!</a><li>
                <li><a href="/organization/team.html">The Coordination Team</a></li>
                <li><a href="/organization/planning/plan-of-work-2023.html">HSF Planning</a></li>
                <li class="divider"></li>
                <li><a href="/organization/goals.html">Goals of the HSF</a></li>
                <li><a href="/organization/cwp.html">Community White Paper</a></li>
                <li><a href="/organization/hsf-letters.html">Letters from the HSF</a></li>
                <li><a href="/organization/presentations.html">HSF Presentations</a></li>
                <li><a href="/organization/youtube.html">HSF YouTube Channel</a></li>
                <li class="divider"></li>
                <li><a href="/howto-website.html">Website Howto</a></li>
              </ul>
            </li>
          </ul>
        </div>
    </div>
</div>


<div class="container">

  <div class="blog-header">
  <h1 class="blog-title">Implement Event based Seeding and Multi-Threading</h1>
</div>

  <h1 id="description">Description</h1>

<p>Allpix Squared is a free and open-source simulation framework for silicon tracker and vertex detectors, written in modern C++. Its goal is to facilitate in-depth studies of silicon-based particle and radiation detectors widely used in high-energy physics. It uses the Geant4 software package to simulate the passage of particles through the detector material, followed by the simulation of the drift and diffusion processes of charge carriers in the silicon, and finally amplification and discrimination on the attached front-end electronics.</p>

<p>Allpix Squared is designed as a modular framework, allowing for both an easy starting point for beginners and possible extension to complex and specialized detector simulations. A modular setup also allows separation of the core of the framework from the implementation of the algorithms in modules, leading to a framework which is both easier to understand and to maintain. This architecture and the physics event-based nature of the simulation would allow for parallelization on an event level, where completely independent events are simulated in different threads in parallel.</p>

<p>GSoC 2018 saw the first implementation of an event-parallel approach, where issues involving the distribution of random seeds, mutexing within the data object types and the mode of information transfer between modules were dealt with. An eventual bottleneck was found however, within the interaction between Allpix Squared and Geant4. While Geant4 is well-equipped for multi-threaded event processing, it is currently implemented in a manner where it takes control of all threads, and is not designed to act in subservience to an external framework. A reimplementation of the Geant4 multi-threaded run manager, encapsulated within Allpix Squared, would allow this issue to be overcome and lead to the first fully event-parallel release.</p>

<p>Once this issue is solved, benchmarking on many-core systems will be required in order to search for unnecessary mutexing or any other limitations which would prevent total processing time scaling.</p>

<h1 id="task-ideas">Task ideas</h1>

<ul>
  <li>Explore the framework and understand the simulation chain</li>
  <li>Benchmark the existing multi-threading approach</li>
  <li>Implement a version of the Geant4 multi-threaded run manager within the framework, to accommodate event generation with Geant4 in different threads</li>
  <li>Test performance of the now complete parallelisation on different machines and as a function of number of worker cores</li>
  <li>Verify data object persistency during multi-threaded operation</li>
  <li>Write test cases / unit tests to ensure proper functionality (distribution of random seeds, performance, functionality with multi-threading off)</li>
</ul>

<h1 id="requirements">Requirements</h1>
<p>This project requires good knowledge of modern C++ (11/14), experience with multi-threading in C++11 is an advantage.</p>

<p>Undertaking this project will improve the understanding of processes in modern radiation detectors and the Monte Carlo simulation approach widely used in particle physics.</p>

<h1 id="mentors">Mentors</h1>
<ul>
  <li><a href="mailto:allpix.squared@cern.ch">Simon Spannagel</a></li>
  <li><a href="mailto:allpix.squared@cern.ch">Daniel Hynds</a></li>
  <li><a href="mailto:allpix.squared@cern.ch">Koen Wolters</a></li>
</ul>

<h1 id="additional-resources">Additional Resources</h1>

<p>The following resources might provide a more complete picture of the software and its purpose. Especially the comprehensive user manual might be useful for a head start.</p>

<h2 id="web-site">Web site</h2>
<p><a href="https://cern.ch/allpix-squared">https://cern.ch/allpix-squared</a></p>

<h2 id="source-code">Source code</h2>

<ul>
  <li>Main repository @ CERN GitLab: <a href="https://gitlab.cern.ch/allpix-squared/allpix-squared">https://gitlab.cern.ch/allpix-squared/allpix-squared</a></li>
  <li>Mirror on GitHub: <a href="https://github.com/simonspa/allpix-squared">https://github.com/allpix-squared/allpix-squared/</a></li>
  <li>Issue tracker: <a href="https://gitlab.cern.ch/allpix-squared/allpix-squared/issues">https://gitlab.cern.ch/allpix-squared/allpix-squared/issues</a></li>
</ul>

<h2 id="documentation">Documentation</h2>

<ul>
  <li>User manual (HTML): <a href="https://cern.ch/allpix-squared/usermanual/allpix-manual.html">https://cern.ch/allpix-squared/usermanual/allpix-manual.html</a></li>
  <li>User manual (PDF): <a href="https://cern.ch/allpix-squared/usermanual/allpix-manual.pdf">https://cern.ch/allpix-squared/usermanual/allpix-manual.pdf</a></li>
  <li>Doxygen code reference: <a href="https://cern.ch/allpix-squared/reference/">https://cern.ch/allpix-squared/reference/</a></li>
</ul>




<h2>Corresponding Project</h2>
  <ul>
      <li><a href="/gsoc/projects/2019/project_AllpixSquared.html">AllpixSquared</a></li>
  </ul>

 <h2>Participating Organizations</h2>
  <ul>
  
<li><a href="/gsoc/organizations/2019/cern.html">CERN</a> </li>
  
<li><a href="/gsoc/organizations/2019/nikhef.html">Nikhef</a> </li>
  
  </ul>


<br><br>
<hr>
<div class="footer fixed-bottom">
<a href="https://github.com/HSF/hsf.github.io/edit/main/_gsocproposals/2019/proposal_AllpixSquaredEventMultithreading.md"><i class="glyphicon glyphicon-wrench"></i> Improve this page. </a>
Thanks to <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://jekyllrb.com/">Jekyll</a> and <a href="http://getbootstrap.com/">Bootstrap</a>.
</div>

</div> <!-- container -->


<!-- Google Analytics -->

<!-- Google Analytics end -->

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</body>
</html>
