<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no">
    <title>Implement vector mode in forward mode automatic differentiation in Clad</title>
    <link rel="icon" type="image/x-icon" href="/images/hsf_logo_angled.png">

    <!-- bootstrap framework -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/flatly/bootstrap.min.css">

    <link rel="stylesheet" href="/css/hsf.css" type="text/css" />
</head>
<body>

<div class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
          <a href="/" class="navbar-brand"><span class="glyphicon glyphicon-home"></span>&nbsp;&nbsp;HSF</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav navbar-center">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="wg_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Working Groups<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                  <li><a href="/what_are_WGs.html">What are HSF working groups?</a></li>
                  <li class="divider"></li>
                  
                    <li><a href="/workinggroups/dataanalysis.html">Data Analysis</a></li>
                  
                    <li><a href="/workinggroups/detsim.html">Detector Simulation</a></li>
                  
                    <li><a href="/workinggroups/frameworks.html">Frameworks</a></li>
                  
                    <li><a href="/workinggroups/generators.html">Physics Generators</a></li>
                  
                    <li><a href="/workinggroups/juliahep.html">JuliaHEP - Julia in HEP</a></li>
                  
                    <li><a href="/workinggroups/pyhep.html">PyHEP - Python in HEP</a></li>
                  
                    <li><a href="/workinggroups/recotrigger.html">Reconstruction and Software Triggers</a></li>
                  
                    <li><a href="/workinggroups/toolsandpackaging.html">Software Developer Tools and Packaging</a></li>
                  
                    <li><a href="/workinggroups/training.html">HSF Training</a></li>
                  
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="activities_menu"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Activities<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 <li><a href="/what_are_activities.html">What are HSF activity areas?</a></li>
                 <li class="divider"></li>
                 
                   <li><a href="/activities/analysisfacilitiesforum.html">Analysis Facilities Forum</a></li>
                 
                   <li><a href="/activities/conditionsdb.html">Conditions Databases</a></li>
                 
                   <li><a href="/activities/differentiablecomputing.html">Differentiable Computing</a></li>
                 
                   <li><a href="/activities/gsdocs.html">Season of Docs</a></li>
                 
                   <li><a href="/activities/gsoc.html">Google Summer of Code</a></li>
                 
                   <li><a href="/activities/idds.html">intelligent Data Delivery Service</a></li>
                 
                   <li><a href="/activities/licensing.html">Licensing</a></li>
                 
                   <li><a href="/activities/reviews.html">Reviews</a></li>
                 
                   <li><a href="/activities/visualization.html">Visualisation</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="meetings_menu"><span class="glyphicon glyphicon-phone-alt"></span>&nbsp;&nbsp;Meetings<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="activities_menu">
                 
                   <li><a href="/meetings/compute-accelerator-forum.html">Compute Accelerator Forum</a></li>
                 
                   <li><a href="/meetings/coordination.html">Coordination Meetings</a></li>
                 
                   <li><a href="/meetings/roundtable.html">Software and Computing Roundtable</a></li>
                 
                   <li><a href="/meetings/software-forum.html">Software Forum</a></li>
                 
               </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="communication_menu"><span class="glyphicon glyphicon-bullhorn"></span>&nbsp;&nbsp;Communication<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="communication_menu">
                  <li><a href="/future-events.html">Community Calendar</a></li>
                  <li><a href="https://indico.cern.ch/category/5816/" target="_hsf_indico">Meetings: Indico</a></li>
                  <li><a href="/Schools/events.html">Training Schools</a></li>
                  <li class="divider"></li>
                  <li><a href="/forums.html">Mailing Lists and Forums</a></li>
                  <li><a href="/organization/minutes.html">Meeting Notes</a></li>
                  <li><a href="/technical_notes.html">Technical Notes</a></li>
                  <li><a href="/organization/documents.html">Documents</a></li>
                  <li><a href="/material_for_presentations.html">Material for presentations</a></li>
                  <li class="divider"></li>
                  <li><a href="/newsletter.html">Newsletters</a></li>
                  <li><a href="/events.html">Events &amp; Workshops</a></li>
                  <li><a href="https://www.youtube.com/c/HEPSoftwareFoundation" target="_hsf_youtube">HSF on YouTube</a></li>
                  <li class="divider"></li>

                  <li><a href="/inventory/inventory.html">HSF Project Inventory</a></li>
                </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/projects.html" id="projects_menu"><span class="glyphicon glyphicon-road"></span>&nbsp;&nbsp;Projects &amp; Support<span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="projects_menu">
                  <li><a href="/project_guidelines.html">How to join as a project</a></li>
                  <li><a href="/projects.html">Member Projects</a></li>
                  <li class="divider"></li>
                  <li><a href="/services.html">Development Services</a></li>
                </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="/index.html" id="about_menu"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;&nbsp;About<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="about_menu">
                <li><a href="/get_involved.html">Get involved!</a><li>
                <li><a href="/organization/team.html">The Coordination Team</a></li>
                <li><a href="/organization/planning/plan-of-work-2023.html">HSF Planning</a></li>
                <li class="divider"></li>
                <li><a href="/organization/goals.html">Goals of the HSF</a></li>
                <li><a href="/organization/cwp.html">Community White Paper</a></li>
                <li><a href="/organization/hsf-letters.html">Letters from the HSF</a></li>
                <li><a href="/organization/presentations.html">HSF Presentations</a></li>
                <li><a href="/organization/youtube.html">HSF YouTube Channel</a></li>
                <li class="divider"></li>
                <li><a href="/howto-website.html">Website Howto</a></li>
              </ul>
            </li>
          </ul>
        </div>
    </div>
</div>


<div class="container">

  <div class="blog-header">
  <h1 class="blog-title">Implement vector mode in forward mode automatic differentiation in Clad</h1>
</div>

  <h2 id="description">Description</h2>

<p>In mathematics and computer algebra, automatic differentiation (AD) is a set of
techniques to numerically evaluate the derivative of a function specified by a
computer program. Automatic differentiation is an alternative technique to
Symbolic differentiation and Numerical differentiation (the method of finite
differences). Clad is based on Clang which provides the necessary facilities for
code transformation. The AD library is able to differentiate non-trivial
functions, to find a partial derivative for trivial cases and has good unit test
coverage.</p>

<p>Vector mode support will facilitate the computation of gradients using the
forward mode AD in a single pass and thus without explicitly performing
differentiation n times for n function arguments. The major benefit of using
vector mode is that computationally expensive operations do not need to be
recomputed n times for n function arguments.</p>

<p>For example, if we want to compute <code class="language-plaintext highlighter-rouge">df/dx</code> and <code class="language-plaintext highlighter-rouge">df/dy</code> of a function
<code class="language-plaintext highlighter-rouge">f(x, y)</code> using the forward mode AD in Clad, then currently we need to
explicitly differentiate <code class="language-plaintext highlighter-rouge">f</code> two times. Vector mode will allow the generation of
<code class="language-plaintext highlighter-rouge">f_d(x, y)</code> such that we will be able to get partial derivatives with respect to
all the function arguments (gradient) in a single call.</p>

<h2 id="task-ideas">Task ideas</h2>

<p>The project consists of the following tasks:</p>
<ul>
  <li>Extend and generalize our ForwardModeVisitor to produce a single
function with the directional derivatives.</li>
  <li>Add a new mode to the top-level clad interface <code class="language-plaintext highlighter-rouge">clad::differentiate</code> for
vector mode.</li>
  <li>Extend the unit test coverage.</li>
  <li>Develop tutorials and documentation.</li>
  <li>Present the work at the relevant meetings and conferences.</li>
</ul>

<h2 id="technology">Technology</h2>

<p>C/C++, Clang, LLVM</p>

<h2 id="desirable-skills">Desirable Skills</h2>

<ul>
  <li>Necessary knowledge: C++ programming; data structures and algorithms.</li>
  <li>Intermediate knowledge of automatic differentiation;</li>
  <li>Basic knowledge of Clang and LLVM</li>
  <li>Experience with Clad would be an asset.</li>
</ul>

<h2 id="expected-results">Expected results</h2>

<p>After successful completion of the project the code snippet should work as
expected:</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;clad/Differentiator/Differentiator.h&gt;
#include &lt;iostream&gt;
</span>
<span class="kt">double</span> <span class="nf">someComputationalIntensiveFn</span><span class="p">();</span>

<span class="kt">double</span> <span class="nf">fn</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="n">someComputationalIntensiveFn</span><span class="p">();</span> <span class="c1">// should be computed only once</span>
                                             <span class="c1">// in the derived function.</span>
    <span class="kt">double</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">t</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">auto</span> <span class="n">d_fn</span> <span class="o">=</span> <span class="n">clad</span><span class="o">::</span><span class="n">differentiate</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s">"arr"</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">d_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">d_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">d_fn</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">d_x</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">d_y</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Derivative of fn wrt d_x: "</span> <span class="o">&lt;&lt;</span> <span class="n">d_x</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Derivative of fn wrt d_y: "</span> <span class="o">&lt;&lt;</span> <span class="n">d_y</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div></div>

<h2 id="candidate-guidelines-and-evaluation">Candidate Guidelines and Evaluation</h2>

<p>If you have interest in working on the project there is a list of things to do
in order to maximize your chances to get selected:</p>

<ol>
  <li>Contact the mentors and express interest in the project. Make sure you attach
your CV;</li>
  <li>Download the source code of the project, build it and run the demos;</li>
  <li>Start familiarizing yourself with the codebase;</li>
  <li>If you have questions you can always contact a mentor.</li>
</ol>

<p>The mentors are interested in working with all candidates but unfortunately the
rules allow only one to be selected. There are a few tasks which give bonus
points to candidate’s application:</p>
<ul>
  <li>Submit a valid bug – demonstrates that the candidate has completed step 2
and 3 from the previous section.</li>
  <li>Fix a bug – demonstrates the technical skills of the candidate and shows
he/she can work independently on the project. The mentors can suggest looking
into these <a href="https://github.com/vgvassilev/clad/labels/good%20first%20issue">good first issues</a>.
Fixing one issue may be enough to become a successful candidate.</li>
</ul>

<h2 id="mentors">Mentors</h2>
<ul>
  <li><strong><a href="mailto:alexander.p.penev@gmail.com">Alexander Penev</a></strong> (University of Plovdiv Paisii Hilendarski)</li>
  <li><a href="mailto:vvasilev@cern.ch">Vassil Vassilev</a> (Princeton)</li>
</ul>

<h2 id="links">Links</h2>

<p><a href="https://compiler-research.org">Compiler-Research</a>
<a href="https://github.com/vgvassilev/clad">clad</a>
<a href="https://root.cern/blog/cling-in-llvm/">clang-repl</a>
<a href="https://llvm.org/">llvm</a>
<a href="https://clang.llvm.org/">clang</a></p>



<h2>Additional Information</h2>
  <ul>
      <li>Difficulty level (low / medium / high): high</li>
      <li>Duration: 350 hours</li>
      <li>Mentor availability: May-September</li>
  </ul>


<h2>Corresponding Project</h2>
  <ul>
      <li><a href="/gsoc/projects/2022/project_Compiler-Research.html">Compiler-Research</a></li>
  </ul>

 <h2>Participating Organizations</h2>
  <ul>
  
<li><a href="/gsoc/organizations/2022/princeton.html">princeton</a> </li>
  
  </ul>


<br><br>
<hr>
<div class="footer fixed-bottom">
<a href="https://github.com/HSF/hsf.github.io/edit/main/_gsocproposals/2022/proposal_Clad-vector-mode.md"><i class="glyphicon glyphicon-wrench"></i> Improve this page. </a>
Thanks to <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://jekyllrb.com/">Jekyll</a> and <a href="http://getbootstrap.com/">Bootstrap</a>.
</div>

</div> <!-- container -->


<!-- Google Analytics -->

<!-- Google Analytics end -->

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</body>
</html>
